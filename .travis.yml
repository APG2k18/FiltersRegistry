language: bash

node_js:
    - "9.5"

install:
    - npm install

script:
    - node index.js

deploy:
    - provider: pages
      skip-cleanup: true
      local-dir: platforms
      github-token: $GITHUB_TOKEN
      keep-history: true
      verbose: true
      on:
        branch: master
      if: env(TRAVIS_COMMIT_MESSAGE) != Deploy AdguardTeam/FiltersRegistry to github.com/AdguardTeam/FiltersRegistry.git:master
    - provider: pages
      target-branch: master
      skip-cleanup: true
      github-token: $GITHUB_TOKEN
      keep-history: true
      verbose: true
      on:
        branch: master
      if: env(TRAVIS_COMMIT_MESSAGE) != Deploy AdguardTeam/FiltersRegistry to github.com/AdguardTeam/FiltersRegistry.git:master